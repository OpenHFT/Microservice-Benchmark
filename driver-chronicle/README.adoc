= Chronicle Solutions for Echo services

== Results on Ryzen 9 5950X

The test was performed with a single producer, microservice ad consumer.

The path can be changed at runtime with `-Dpath=/mypath/tmp`

.100 kmsg/s Asynchronous mode
```
-------------------------------- SUMMARY (end to end) ------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            2.56         2.60         2.61         2.60         2.61         1.23
90.0:            2.78         2.82         2.82         2.81         2.82         0.95
99.0:            3.28         3.29         3.30         3.27         3.30         0.65
99.7:            3.83         3.83         3.86         3.83         3.84         0.55
99.9:            4.58         4.50         4.65         4.65         4.49         2.32
99.97:           5.62         5.72         5.78         5.80         5.82         2.23
99.99:           6.02         6.10         6.14         6.14         6.15         1.40
99.997:          6.46         6.38         6.41         6.41         6.41         0.83
99.999:          7.46         6.82         6.74         6.74         6.78         6.64
worst:         238.85      1415.17        10.35        10.54         9.84        98.96
-------------------------------- SUMMARY (publish) ---------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.37         0.42         0.42         0.42         0.41         8.25
90.0:            0.43         0.45         0.45         0.45         0.45         3.00
99.0:            0.46         0.47         0.48         0.49         0.48         4.16
99.7:            0.79         0.82         0.81         0.78         0.82         3.30
99.9:            0.92         0.95         0.96         0.94         0.95         2.81
99.97:           1.17         1.10         1.14         1.13         1.12         3.95
99.99:           1.63         1.38         1.41         1.39         1.70        13.37
99.997:          3.47         3.49         3.49         3.51         3.62         2.84
99.999:          3.72         3.71         3.72         3.74         3.77         1.14
worst:         235.78        11.25         6.65         6.07         6.95        96.19
-------------------------------- SUMMARY (toService) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            1.05         1.08         1.08         1.08         1.08         1.99
90.0:            1.11         1.12         1.12         1.12         1.12         0.72
99.0:            1.41         1.28         1.43         1.42         1.37         7.15
99.7:            1.67         1.68         1.68         1.68         1.68         0.48
99.9:            2.09         2.10         2.19         2.18         2.10         2.97
99.97:           2.60         2.82         2.86         2.84         2.92         7.57
99.99:           4.25         4.49         4.54         4.54         4.57         4.78
99.997:          4.49         4.74         4.79         4.78         4.81         4.54
99.999:          4.73         4.94         4.98         4.97         4.98         3.48
worst:         236.80       104.32         8.82         8.50         8.37        94.79
------------------------------------------------------------------------------------------
```

.250 kmsg/s Synchronous mode
```
-------------------------------- SUMMARY (end to end) ------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            1.81         1.81         1.83         1.83         1.83         0.73
90.0:            2.55         2.56         2.58         2.59         2.59         1.04
99.0:           18.08        18.85        18.66        20.00        21.28        10.55
99.7:           30.56        31.26        31.07        32.35        33.86         6.71
99.9:           37.57        38.21        37.57        42.30        42.18         7.75
99.97:          54.21        55.36        54.98        59.07        58.05         5.64
99.99:          61.12        62.14        61.63        73.60        65.92        11.98
99.997:         72.32        84.10        70.27       473.60        73.60        79.28
99.999:        108.67       210.69        95.87       672.77        81.54        82.86
worst:         283.14       596.99      3592.19       961.54       119.68        95.08
-------------------------------- SUMMARY (publish) ---------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.36         0.37         0.36         0.36         0.36         1.82
90.0:            0.39         0.39         0.39         0.39         0.39         0.00
99.0:            2.61         2.85         2.76         2.90         3.03         9.60
99.7:           12.08        12.43        12.37        12.91        13.74         8.41
99.9:           16.11        16.48        16.37        17.18        18.34         8.43
99.97:          23.07        23.97        23.71        25.70        25.31         7.05
99.99:          30.56        31.71        31.33        34.50        33.09         7.91
99.997:         36.54        42.43        39.23       156.42        40.13        68.62
99.999:         57.92       142.08        69.50       588.80        55.23        86.56
worst:         218.37       590.85       204.03       955.39       108.67        83.86
-------------------------------- SUMMARY (toService) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.92         0.92         0.92         0.92         0.92         0.00
90.0:            1.52         1.52         1.52         1.53         1.52         0.35
99.0:           15.82        16.27        16.27        17.12        18.40         9.79
99.7:           26.72        27.49        27.23        28.51        29.92         7.39
99.9:           33.98        34.62        33.98        38.46        38.34         8.08
99.97:          50.24        51.39        51.01        55.10        54.21         6.06
99.99:          57.28        58.30        57.66        69.76        62.14        12.68
99.997:         68.48        80.51        66.69       470.53        69.76        80.15
99.999:        105.86       209.15        93.06       670.72        77.70        83.58
worst:         279.04       592.90       206.08       957.44       115.84        82.89
```

.250Kmsg/s Asynchronous mode
```
-------------------------------- SUMMARY (end to end) ------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            2.67         2.62         2.62         2.63         2.62         1.21
90.0:            2.99         2.99         2.99         2.99         2.99         0.00
99.0:            3.99         3.95         3.96         3.95         3.95         0.67
99.7:            4.26         4.20         4.22         4.18         4.18         1.26
99.9:            4.57         4.49         4.49         4.46         4.42         2.12
99.97:           5.11         4.98         4.98         4.86         4.78         4.48
99.99:           5.66         5.42         5.38         5.29         5.26         4.83
99.997:          6.90         5.82         5.77         5.66         5.66        12.82
99.999:         10.10         6.49         6.12         5.99         6.14        31.35
worst:         106.88       103.04        11.28         9.62        93.31        87.09
-------------------------------- SUMMARY (publish) ---------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.55         0.38         0.38         0.38         0.38        23.00
90.0:            0.65         0.42         0.42         0.42         0.42        26.76
99.0:            1.08         0.94         0.93         0.93         0.95         9.76
99.7:            1.30         1.00         1.03         0.99         1.01        17.30
99.9:            1.39         1.09         1.10         1.07         1.09        16.62
99.97:           1.59         1.22         1.23         1.23         1.23        16.72
99.99:           1.92         1.54         1.54         1.53         1.54        14.59
99.997:          2.34         1.86         1.84         1.84         1.85        15.27
99.999:          3.60         2.02         2.01         1.99         2.04        35.09
worst:          86.14        17.18         4.90         5.38        85.63        91.70
-------------------------------- SUMMARY (toService) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            1.42         1.12         1.12         1.12         1.12        15.13
90.0:            1.59         1.17         1.17         1.17         1.17        19.31
99.0:            2.14         1.83         1.83         1.83         1.83        10.15
99.7:            2.37         1.91         1.91         1.90         1.91        14.14
99.9:            2.60         2.12         2.12         2.09         2.09        14.03
99.97:           2.93         2.49         2.49         2.46         2.45        11.54
99.99:           3.28         2.69         2.67         2.65         2.65        13.71
99.997:          3.82         2.93         2.91         2.86         2.89        18.29
99.999:          6.62         3.23         3.18         3.10         3.25        43.06
worst:          96.13        98.69         6.10         6.17        86.40        91.00
```

.500 kmsg/s Synchronous mode
```
-------------------------------- SUMMARY (end to end) ------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            1.84         1.84         1.84         1.84         1.84         0.00
90.0:            3.62         3.69         3.73         3.80         3.72         3.28
99.0:           29.86        29.34        30.82        34.37        30.24        10.24
99.7:           38.21        40.26        44.35        51.78        45.50        19.14
99.9:           48.70        50.24        55.10        61.25        55.10        14.65
99.97:          54.46        57.15        64.83        69.25        61.12        15.32
99.99:          90.24        62.40        76.93        79.49        67.97        22.92
99.997:        296.45        93.31       226.56       147.20        83.84        62.83
99.999:        354.82       486.91       560.13       407.04       182.02        58.07
99.9997:       370.18       615.42       652.29       547.84       233.22        54.50
worst:         458.24       676.86       685.06       615.42       274.94        49.86
-------------------------------- SUMMARY (publish) ---------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.35         0.35         0.35         0.35         0.35         0.00
90.0:            0.40         0.41         0.41         0.56         0.45        21.08
99.0:            8.02         7.69         8.37         9.87         8.10        15.92
99.7:           14.70        14.35        14.99        16.54        14.67         9.24
99.9:           17.38        17.44        20.58        24.10        20.26        20.50
99.97:          23.52        24.93        27.55        31.90        28.06        19.20
99.99:          27.23        31.07        33.86        37.82        33.34        20.59
99.997:         55.49        57.15        44.22        76.67        49.34        32.85
99.999:         94.34       242.94        62.40       225.02        99.97        65.86
99.9997:       154.37       541.70        79.74       492.03       185.09        79.43
worst:         194.82       672.77       113.28       611.33       271.87        76.70
-------------------------------- SUMMARY (toService) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.90         0.90         0.90         0.91         0.90         0.73
90.0:            1.79         1.83         1.85         2.00         1.86         7.32
99.0:           27.87        27.30        28.77        32.35        28.26        10.99
99.7:           36.16        38.08        42.30        49.73        43.33        20.01
99.9:           46.78        48.19        53.06        59.20        53.06        15.03
99.97:          52.54        55.10        62.78        67.20        59.07        15.68
99.99:          88.45        60.48        74.88        77.44        65.92        23.56
99.997:        294.40        91.52       224.51       146.18        81.79        63.41
99.999:        352.77       484.86       558.08       404.99       179.97        58.34
99.9997:       368.13       613.38       650.24       545.79       231.17        54.72
worst:         457.22       674.82       683.01       613.38       272.90        50.05
```

.500 kmsg/s Asynchronous mode
```
-------------------------------- SUMMARY (end to end) ------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            2.51         2.51         2.51         2.52         2.54         0.84
90.0:            3.04         3.05         3.07         3.08         3.06         0.87
99.0:            3.61         3.63         3.68         3.71         3.69         1.74
99.7:            4.08         4.05         4.09         4.14         4.10         1.36
99.9:            4.66         4.55         4.60         4.65         4.60         1.61
99.97:           5.38         5.13         5.22         5.22         5.21         3.22
99.99:           6.34         5.69         5.77         5.70         5.74         7.14
99.997:         26.02         7.48         6.65         6.25         6.94        67.84
99.999:        100.48       109.70         8.94         6.90        69.76        90.85
99.9997:       117.12       120.96        60.74        25.82        84.10        71.06
worst:         222.98       144.13       100.99        91.01      3059.71        95.60
-------------------------------- SUMMARY (publish) ---------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.39         0.39         0.39         0.39         0.41         3.30
90.0:            0.43         0.43         0.44         0.44         0.44         1.52
99.0:            0.71         0.47         0.49         0.50         0.54        25.42
99.7:            0.99         0.98         1.00         1.01         1.01         2.00
99.9:            1.07         1.04         1.09         1.12         1.09         4.87
99.97:           1.24         1.16         1.22         1.25         1.23         4.81
99.99:           1.59         1.47         1.49         1.48         1.57         5.16
99.997:          2.01         1.82         1.86         1.84         2.12         9.95
99.999:          4.70         1.98         2.09         2.02         2.40        47.72
99.9997:        14.96         2.29        16.86         2.61        15.12        80.91
worst:          91.26        22.11        89.73        88.45        96.90        69.28
-------------------------------- SUMMARY (toService) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            1.09         1.09         1.10         1.09         1.13         2.39
90.0:            1.14         1.14         1.15         1.15         1.18         2.28
99.0:            1.77         1.79         1.81         1.81         1.82         1.92
99.7:            2.04         2.01         2.03         2.06         2.06         1.63
99.9:            2.53         2.41         2.46         2.50         2.50         3.21
99.97:           3.13         2.87         2.97         2.98         2.95         5.78
99.99:           3.93         3.32         3.50         3.43         3.44        10.87
99.997:          9.10         3.85         4.25         3.93         4.49        47.62
99.999:         27.30         4.46         6.58         4.52        67.20        90.37
99.9997:        38.46         8.75        58.69        24.42        80.77        84.58
worst:         125.82       111.49        91.78        89.47      2174.98        93.95
```

== The GC log for the run of 500 k/s messages for 5 minutes

.The last GC is triggered as a part of the warmup
```
[0.023s][info][gc] Using G1
[2.043s][info][gc] GC(0) Pause Young (Normal) (G1 Evacuation Pause) 48M->5M(1004M) 5.614ms
[2.054s][info][gc] GC(1) Pause Young (Concurrent Start) (Metadata GC Threshold) 9M->6M(1004M) 3.674ms
[2.054s][info][gc] GC(2) Concurrent Cycle
[2.059s][info][gc] GC(2) Pause Remark 10M->10M(1004M) 0.733ms
[2.060s][info][gc] GC(2) Pause Cleanup 10M->10M(1004M) 0.053ms
[2.062s][info][gc] GC(2) Concurrent Cycle 7.289ms
[4.076s][info][gc] GC(3) Pause Young (Concurrent Start) (G1 Evacuation Pause) 94M->14M(1004M) 4.463ms
[4.076s][info][gc] GC(4) Concurrent Cycle
[4.083s][info][gc] GC(4) Pause Remark 24M->24M(1004M) 1.191ms
[4.084s][info][gc] GC(4) Pause Cleanup 25M->25M(1004M) 0.057ms
[4.086s][info][gc] GC(4) Concurrent Cycle 9.823ms
```

== 25kmsg/s

```
------------------------------- SUMMARY (end to end) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            2.51         2.51         2.50         2.50         2.48         0.64
90.0:            2.68         2.69         2.68         2.68         2.67         0.60
99.0:            3.05         3.04         3.03         3.03         3.01         0.88
99.7:            3.59         3.61         3.60         3.64         3.62         1.03
99.9:            4.25         4.18         4.26         4.50         4.46         4.85
99.97:           5.38         5.45         5.40         5.53         5.50         1.75
99.99:           5.90         5.86         5.85         5.88         5.88         0.54
99.997:          6.34         6.25         6.22         6.25         6.28         1.35
99.999:          9.39         8.34         9.65         9.30         9.71         9.91
worst:         105.60       213.76        90.50        85.89        92.54        49.81
-------------------------------- SUMMARY (publish) ---------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            0.61         0.41         0.39         0.39         0.37        30.20
90.0:            0.69         0.55         0.43         0.43         0.42        30.01
99.0:            0.88         0.73         0.45         0.45         0.45        38.92
99.7:            1.01         0.85         0.55         0.65         0.64        35.76
99.9:            1.20         0.97         0.88         0.90         0.90        19.54
99.97:           1.58         1.18         1.04         1.12         1.17        25.68
99.99:           2.39         2.04         1.64         2.01         1.95        23.25
99.997:          3.98         3.75         3.63         3.72         3.60         6.50
99.999:          4.22         3.99         3.87         3.92         3.83         6.33
worst:          71.81       201.47        87.17        75.90        71.81        54.62
-------------------------------- SUMMARY (toService) -------------------------------------
Percentile   run1         run2         run3         run4         run5      % Variation
50.0:            1.43         1.10         1.09         1.09         1.07        18.32
90.0:            1.58         1.35         1.13         1.13         1.12        21.47
99.0:            1.91         1.65         1.19         1.19         1.18        29.11
99.7:            2.08         1.85         1.63         1.65         1.63        15.66
99.9:            2.45         2.11         2.04         2.18         2.20        11.81
99.97:           3.09         2.67         2.50         2.67         2.67        13.63
99.99:           4.62         4.31         4.18         4.28         4.22         6.44
99.997:          5.02         4.66         4.57         4.60         4.57         6.14
99.999:          6.20         5.40         6.44         6.78         7.80        22.86
worst:          92.54       212.22        87.94        76.67        91.01        54.10
```